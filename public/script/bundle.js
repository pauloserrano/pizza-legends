(()=>{"use strict";function t(t){return 16*t}t(10.5),t(6),Object.freeze({FINISHED_MOVING:"FinishedMoving",FINISHED_STANDING:"FinishedStanding",PLAYER_INTERACT:"PlayerInteract"});var e=function(){function t(t){var e=t.gameEntity,i=t.src,n=this;this.isImageLoaded=!1,this.isShadowLoaded=!1,this.gameEntity=e,this.image=new Image,this.image.src=i,this.image.onload=function(){return n.isImageLoaded=!0},this.shadow=new Image,this.shadow.src="assets/characters/shadow.png",this.shadow.onload=function(){return n.isShadowLoaded=!0}}return t.prototype.draw=function(t){var e=0,i=0,n=32,r=32,a={x:this.gameEntity.getPosition().x-8,y:this.gameEntity.getPosition().y-18};this.isShadowLoaded&&t.drawImage(this.shadow,a.x,a.y),this.isImageLoaded&&t.drawImage(this.image,e,i,n,r,a.x,a.y,32,32)},t}(),i=function(){function i(i){var n=i.position,r=i.src,a=i.direction;this.position={x:t((null==n?void 0:n.x)||0),y:t((null==n?void 0:n.y)||0)},this.direction=a||"down",this.sprite=new e({gameEntity:this,src:r})}return i.prototype.getPosition=function(){return this.position},i.prototype.getDirection=function(){return this.direction},i.prototype.getSprite=function(){return this.sprite},i}(),n=function(){function t(t){var e=t.src,i=t.gameEntities;this.gameEntities=i||[],this.lowerLayer=new Image,this.lowerLayer.src=e.lower,this.upperLayer=new Image,this.upperLayer.src=e.upper}return t.prototype.drawLowerLayer=function(t){t.drawImage(this.lowerLayer,0,0)},t.prototype.drawUpperLayer=function(t){t.drawImage(this.upperLayer,0,0)},t.prototype.getGameEntities=function(){return this.gameEntities},t}();(new(function(){function t(){this.canvas=document.querySelector("canvas"),this.ctx=this.canvas.getContext("2d"),this.map=new n({src:{lower:"./assets/maps/DemoLower.png",upper:"./assets/maps/DemoUpper.png"},gameEntities:[new i({src:"assets/characters/people/hero.png",position:{x:5,y:6}})]})}return t.prototype.startGameLoop=function(){var t=this,e=function(){t.ctx.clearRect(0,0,t.canvas.width,t.canvas.height),t.map.drawLowerLayer(t.ctx),t.map.getGameEntities().forEach((function(e){e.getSprite().draw(t.ctx)})),t.map.drawUpperLayer(t.ctx),requestAnimationFrame(e)};e()},t.prototype.init=function(){this.startGameLoop()},t}())).init()})();